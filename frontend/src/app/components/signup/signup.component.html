<div class="customContainer">
    <div *ngIf="success" >
        <div class="d-flex justify-content-center">
            <div class="spinner-border text-success" role="status">
            <span class="sr-only"></span>
        </div>
        </div>
        
        <div class="alert alert-success">
             Succesfully Created, redirecting.....
        </div>
        
    </div>
    <h3>Sign Up</h3>
    <form class="border p-3" [formGroup]="signupForm" (ngSubmit)="handleSignup()">
        <div class="input-group mb-3">
            <input class="form-control" [ngClass]="
               signupForm.controls['firstName']?.invalid && signupForm.controls['firstName']?.touched
                ? 'is-invalid'
                : ''
            " type="text" placeholder="Enter First Name" formControlName="firstName" />
            <input class="form-control" [ngClass]="
                signupForm.controls['lastName']?.invalid && signupForm.controls['lastName']?.touched
                ? 'is-invalid'
                : ''
            " type="text" placeholder="Enter Last Name" formControlName="lastName" />
        </div>

        <div class="form-floating mb-3">
            <input id="floatingDOB" class="form-control" [ngClass]="
              signupForm.controls['birthDate']?.invalid &&
               signupForm.controls['birthDate']?.touched
                ? 'is-invalid'
                : ''
            " type="date" formControlName="birthDate" />
            <label for="floatingDOB">Date of Birth</label>
            <div *ngIf="
               signupForm.controls['birthDate']?.invalid &&
               signupForm.controls['birthDate']?.touched
            ">
                <div *ngIf=" signupForm.controls['birthDate']?.getError('required')" class="text-danger">Date of Birth is
                    Required</div>
            </div>
        </div>
        <div class="form-group mb-3">
            <input class="form-control" [ngClass]="
              signupForm.controls['phone']?.invalid &&
              signupForm.controls['phone']?.touched
                ? 'is-invalid'
                : ''
            " type="text" placeholder="Enter Phone" formControlName="phone" />
            <div *ngIf="
              signupForm.controls['phone']?.invalid &&
              signupForm.controls['phone']?.touched
            ">
                <div *ngIf="signupForm.controls['phone']?.getError('required')" class="text-danger">Phone is
                    Required</div>
                <div *ngIf="signupForm.controls['phone']?.getError('minlength')" class="text-danger">Phone shouldn have at
                    least 10 chars</div>
            </div>
        </div>
        <div class="form-group mb-3">
            <input class="form-control" [ngClass]="
              signupForm.controls['email']?.invalid &&
              signupForm.controls['email']?.touched
                ? 'is-invalid'
                : ''
            " type="email" placeholder="Enter email" formControlName="email" />
            <div *ngIf="
              signupForm.controls['email']?.invalid &&
              signupForm.controls['email']?.touched
            ">
                <div *ngIf="signupForm.controls['email']?.getError('required')" class="text-danger">Email is
                    Required</div>
                <div *ngIf="signupForm.controls['email']?.getError('pattern')" class="text-danger">
                    Please enter valid email
                </div>
            </div>
        </div>
        <div class="form-group mb-3">
            <input class="form-control" [ngClass]="
              signupForm.controls['password']?.invalid &&
               signupForm.controls['password']?.touched
                ? 'is-invalid'
                : ''
            " type="password" placeholder="Enter password" formControlName="password" />
            <div *ngIf="
               signupForm.controls['password']?.invalid &&
               signupForm.controls['password']?.touched
            ">
                <div *ngIf=" signupForm.controls['password']?.getError('required')" class="text-danger">Password is
                    Required</div>
                <div *ngIf=" signupForm.controls['password']?.getError('minlength')" class="text-danger">Password length
                    shouldn be at least 6 chars</div>
            </div>
        </div>
        <div class="form-group mb-3">
            <input class="form-control" [ngClass]="
              signupForm.controls['confirmPassword']?.invalid &&
              signupForm.controls['confirmPassword']?.touched &&
              signupForm.errors?.['notEqual']
                ? 'is-invalid'
                : ''
            " type="password" placeholder="Re-enter password" formControlName="confirmPassword" />
            <div *ngIf="
              signupForm.controls['confirmPassword']?.invalid &&
              signupForm.controls['confirmPassword']?.touched 
            ">
                <div *ngIf="signupForm.controls['confirmPassword']?.getError('required')" class="text-danger">Password is
                    Required</div>
                <div *ngIf="signupForm.controls['confirmPassword']?.getError('minlength')" class="text-danger">Password
                    length shouldn be at least 6 chars</div>
            </div>
            <div *ngIf="signupForm.errors?.['notEqual']" class="text-danger">Password
                Passwords do not match</div>
        </div>
        <div class="border p-3">
            <p>Role</p>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" value="buyer" formControlName="role" />
                <label class="form-check-label" for="buyer">Buyer </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" value="breeder" formControlName="role" />
                <label class="form-check-label" for="breeder">Breeder </label>
            </div>
        </div>
        <div class="d-grid mt-3">
            <button class="btn btn-secondary" type="submit" [disabled]="!signupForm.valid">
                Sign up
            </button>
        </div>
    </form>
</div>